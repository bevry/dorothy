#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

if command-missing rg; then
	stderr echo 'missing dependency [ripgrep], installing automatically...'
	stderr setup-util-ripgrep
fi

u="https://api.github.com/repos/${1:?"USAGE: github-release-file org/repo"}/releases/latest"
f="${2:?"USAGE: github-release-file org/repo filename"}"

curl -s "$u" | jq -r ".assets[] | select(.name|contains(\"$f\")) | .browser_download_url" | rg --invert-match  '.(mini)?sig$'
