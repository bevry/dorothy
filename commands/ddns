#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"
source "$DOROTHY/sources/config.sh"
load_dorothy_config 'ddns.bash'

# dependencies
env QUIET=yes setup-util-httpie

# port="${1:?USAGE: ddns PORT}"
# ngrok http "$port"
# tunnel="$(fetch localhost:4040/api/tunnels | jq -r .tunnels[0].public_url)"
# tunnel="$(get-url-hostname "$tunnel")"

http --verbose --check-status "${DDNS_WORKER}" Authorization:"${DDNS_WORKER_AUTH-}" content="${DDNS_URL}"
