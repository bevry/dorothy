#!/usr/bin/env bash

# https://github.com/vinceliuice/WhiteSur-gtk-theme

function setup_util_whitesur() (
	source "$DOROTHY/sources/bash.bash"
	source "$(type -P setup-util)" # EVAL_INSTALL EVAL_UNINSTALL

	# setup
	function __whitesur_sync {
		local root
		root="$(fs-temp --root="$DOROTHY/state" --directory='setup-util-whitesur')" || return $?
		cd "$root" || return $?
		git-helper sync --url='https://github.com/vinceliuice/WhiteSur-gtk-theme.git' --depth=1 || return $?
	}
	function __whitesur_install() (
		__whitesur_sync || return $?
		./install.sh || return $?
	)
	function __whitesur_uninstall() (
		__whitesur_sync || return $?
		./install.sh --uninstall || return $?
	)

	# setup
	local options=(
		--name='WhiteSur GTK Theme'
		"$@"
		EVAL_INSTALL='__whitesur_install'
		EVAL_UNINSTALL='__whitesur_uninstall'
	)
	setup_util "${options[@]}"
)

# fire if invoked standalone
if [[ $0 == "${BASH_SOURCE[0]}" ]]; then
	setup_util_whitesur "$@"
fi
