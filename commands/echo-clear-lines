#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

# test cases:
# confirm "Press any key to continue..."
# ^ without \e[J it will have an indentation at the start

piped='no'
if test "${1-}" = '--piped'; then
	piped='yes'
	shift
fi

# echo 'sup'; printf 'a\nb\nc' | echo-clear-lines --piped
# outputs: sup

# header="$(mktemp)"; echo 'sup'; printf 'a\nb\nc' | tee "$header"; echo-clear-lines < "$header"

function arg {
	echo-clear-lines <<<"$*"
}
function line {
	if test "$piped" = 'yes'; then
		# erase current line
		printf $'\e[2K\e[G'
	else
		# delete prior line (aka echo-clear-line)
		printf $'\e[F\e[J'
	fi
}
function inline {
	# erase current line
	printf $'\e[2K\e[G'
}

source "$DOROTHY/sources/stdinargs.bash"
