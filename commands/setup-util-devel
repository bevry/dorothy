#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

if is-mac; then
	echo -e '\nEnsuring Apple Command Line Tool are installed..'
	while true; do
		if ! xcode-select --install; then
			echo "...Apple Command Line Tool are installed"
			break
		else
			confirm "Press any key once the Apple Command Line Tool have been installed"
		fi
	done

	echo -e '\nEnsuring the XCode license is accepted...'
	sudo xcodebuild -license
fi

env NAME='Build Essentials' \
	APT='build-essential' \
	BREW='coreutils' \
	PAMAC='base-devel' \
	YUM='coreutils' \
	setup-util

env CLI=clang \
	BREW=clang \
	APT=clang \
	PACMAN=clang \
	YUM=clang \
	setup-util

env CLI=cmake \
	BREW=cmake \
	APT=cmake \
	PACMAN=cmake \
	YUM=cmake \
	setup-util

if command-missing pacman; then
	# llvm-gcc is bundled with arch it seems, as it is not exposed by the cli yet pacman says it is installed
	env CLI=llvm-gcc \
		BREW=llvm \
		APT=llvm \
		PACMAN=llvm \
		YUM=llvm \
		setup-util
fi

env CLI=pkg-config \
	BREW=pkg-config \
	APT=pkg-config \
	ACMAN=pkg-config \
	YUM=pkg-config \
	setup-util
