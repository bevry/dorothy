#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

# extract options
if test "$#" -eq 3; then
	# supports the case where the options are squashed together into one argument, yet still maintaining newlines
	mapfile -t options <<<"$3"
else
	# supports the case where each option is its own argument
	options=("${@:3}")
fi

if is-value "${2-}"; then
	if ! is-needle "$2" "${options[@]}"; then
		stderr echo "invalid selection [$2], the selection must be one of these:"
		stderr echo-lines "${options[@]}"
		exit 1
	fi
	echo -n "$2"
else
	stderr echo "$1"
	choose "${options[@]}"
fi
