#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

# prepare
dirs=(
	"$HOME/Applications"
	"/Applications"
	"/Applications/Setapp"
)

# help
if is-help-empty "$@"; then
	stderr cat <<-EOF
		ABOUT:
		Get the full path of a GUI application.

		USAGE:
		get-app <app path or name>

		QUIRKS:
		Searches the following paths for the application:
		$(echo-lines -- "${dirs[@]}")
	EOF
	exit 22 # Invalid argument
fi

# ensure the name has .app appended
name="$*"
appname="${name%.app}.app"

# iterate through a few options
for dir in "${dirs[@]}"; do
	path="$dir/$appname"
	if test -d "$path"; then
		echo "$path"
		exit 0
	fi
done

# wasn't found
exit 1
