#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

# ensure git is configured correctly
# 0 no error
# 1 success but error - this is what github does, as is not a real ssh terminal
# 255 configuration error - this is what we are after

url="${1:-"git@github.com"}"

if test "$("$DOROTHY/commands/echo-exit-code" ssh -qT "$url")" -le 1; then
	echo 'yes'
else
	echo 'no'
	exit 1
fi
