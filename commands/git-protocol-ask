#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

if test -z "${GIT_PROTOCOL-}"; then
	source "$DOROTHY/sources/user.sh"
fi

def="${1:-"${GIT_PROTOCOL-}"}"
if test "$def" = 'https'; then
	# skip checks if htps
	echo 'https'
	exit 0
fi

choices=()
if "$DOROTHY/commands/silent" "$DOROTHY/commands/is-ssh-working"; then
	choices+=('ssh')
fi
choices+=('https')

"$DOROTHY/commands/choose-option" 'Which git protocol do you wish to use?' "$def" -- "${choices[@]}"
