#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

cmd="$*"
function leave() {
	local ec="$?" exit_color='green'
	if test "$ec" -ne 0; then
		exit_color='red'
	fi
	echo-color --bold "</$cmd>" "--$exit_color" "[${ec}]"
	exit "$ec"
}
trap leave EXIT

echo-color --bold "<$cmd>"

# eval "$@" will mangle spaces and other things that need escaping
("$@")
