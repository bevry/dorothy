#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

filename="${1:?USAGE: unziptar <archive-file> [extraction-destination] [zip|tar]}"
destination="${2-}"
format=".${3:-"$filename"}"  # zip | tar | original filename, say a URL or so, before archive-file became a tmp file

filepath="$(fs-absolute "$filename")"

if contains-string "$format" ".zip"; then
	if test -n "$destination"; then
		unzip "$filepath" -d "$destination"
	else
		unzip "$filepath"
	fi
else
	if test -n "$destination"; then
		mkdir -p "$destination"
		cd "$destination" || exit 1
		tar -xvzf "$filepath"
	else
		tar -xvzf "$filepath"
	fi
fi
