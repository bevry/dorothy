#!/usr/bin/env bash

function sudo_helper() (
	source "$DOROTHY/sources/bash.bash"
	dorothy-warnings add --code='sudo-helper' --bold=' has been deprecated in favor of ' --code='eval-helper --elevate'

	# =====================================
	# Arguments

	function help {
		cat <<-EOF >&2
			ABOUT:
			Run the command with privilege elevation, be it via sudo or doas, or neither if not needed.

			USAGE:
			sudo-helper [...options] -- <command> [...args]

			OPTIONS:
			Forwarded to [eval-helper].
		EOF
		if [[ $# -ne 0 ]]; then
			__print_error "$@"
		fi
		return 22 # EINVAL 22 Invalid argument
	}

	# =====================================
	# Action

	eval-helper --elevate "$@"
)

# fire if invoked standalone
if [[ $0 == "${BASH_SOURCE[0]}" ]]; then
	sudo_helper "$@"
fi
