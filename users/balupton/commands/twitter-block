#!/usr/bin/env bash
source "$BDIR/sources/strict.bash"

# 1. create an app with read+write access permissions
# 2. run this once https://github.com/twitter/twurl#getting-started
# twurl authorize --consumer-key KEY --consumer-secret SECRET
# 3. then you can run this script without issue

while IFS= read -r username; do
	# https://developer.twitter.com/en/docs/twitter-api/v1/accounts-and-users/mute-block-report-users/api-reference/post-blocks-create
	echo "$username"
	twurl -d "screen_name=$username" '/1.1/blocks/create.json'
	echo -e '\n'
done < "$1"
